<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document 24</title>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      .marker {
  background-image: url('mapbox-icon.png');
  background-size: cover;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  cursor: pointer;
}
      .mapboxgl-popup {
  max-width: 200px;
}

.mapboxgl-popup-content {
  text-align: center;
  font-family: 'Open Sans', sans-serif;
}
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="map" style="width: 100%; height: 300vh"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js"></script>

    <script>
      

      
      mapboxgl.accessToken =
        "pk.eyJ1IjoibW9oYW1tZWRmYXJpc29mZmljaWFsIiwiYSI6ImNrenp1eGdxNTBkcjQzYm54eTJ1NWM4cnUifQ.i0BdrNMcqwUIMU1o5cwJ7g";
      const map = new mapboxgl.Map({
        container: "map", // container ID
        style: "mapbox://styles/mapbox/streets-v12", // style URL
        center: [-74.5, 40], // starting position [lng, lat]
        zoom: 9, // starting zoom
      });

      //  attribution control
      map.addControl(
        new mapboxgl.GeolocateControl({
          positionOptions: {
            enableHighAccuracy: true,
          },
          trackUserLocation: true,
          showUserHeading: true,
        })
      );
      
      
       const container = document.querySelector("#container");
      let lat,lng;
     
      function getLocation() {
  if (navigator.geolocation) {
    console.log("support")
    navigator.geolocation.getCurrentPosition((position)=>{
      lat=position.coords.latitude.toFixed(3) || 10.916
      lng=position.coords.longitude.toFixed(3) || 75.923
    container.innerHTML = "Latitude: " + position.coords.latitude.toFixed(3) +
  "<br>Longitude: " + position.coords.longitude.toFixed(3);
        console.log(position.coords.latitude)   }                                     
                                            
);
    
  } else {
    console.log("not support")
    container.innerHTML = "Geolocation is not supported by this browser.";
  }
}
      getLocation()
      
      //code for markers
      
          const geojson = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [-77.032, 38.913]
      },
      properties: {
        title: 'Mapbox',
        description: 'Washington, D.C.'
      }
    },
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [75.923, 10.916]
        
      },
      properties: {
        title: 'Mapbox',
        description: 'Tirur, D.C.'
      }
    },
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [-122.414, 37.776]
      },
      properties: {
        title: 'Mapbox',
        description: 'San Francisco, California'
      }
    },
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [lat, lng]
      },
      properties: {
        title: 'Mapbox',
        description: 'custom, location'
      }
    }
  ]
};
      // add markers to map
for (const feature of geojson.features) {
  // create a HTML element for each feature
  const el = document.createElement('div');
  el.className = 'marker';

  // make a marker for each feature and add to the map
  new mapboxgl.Marker(el).setLngLat(feature.geometry.coordinates).addTo(map);
  
   //popups
      new mapboxgl.Marker(el)
  .setLngLat(feature.geometry.coordinates)
  .setPopup(
    new mapboxgl.Popup({ offset: 25 }) // add popups
      .setHTML(
        `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
      )
  )
  .addTo(map);
}
     
      //end code for markers

    </script>
  </body>
</html>
